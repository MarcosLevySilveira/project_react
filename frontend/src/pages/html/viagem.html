<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poupança de Viagem</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }

        header {
            background-color: #4CAF50;
            color: white;
            text-align: center;
            padding: 1em 0;
            margin-bottom: 20px;
        }

        nav {
            background-color: #333;
            overflow: hidden;
        }

        nav a {
            float: left;
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }

        nav a:hover {
            background-color: #ddd;
            color: black;
        }

        main {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 600px;
            /* Largura máxima do container */
            margin: auto;
            padding: 20px;
            gap: 20px;
            /* Espaçamento entre os elementos */
        }

        .cofre {
            width: 100%;
            height: 200px;
            /* Altura do cofre */
            border: 5px solid #333;
            border-radius: 10px;
            background-color: #fff;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .nivel {
            position: absolute;
            bottom: 0;
            width: 100%;
            background-color: #4CAF50;
            height: 0;
            /* Inicia a altura do cofre como 0 */
            transition: height 0.5s ease-in-out;
            /* Duração da transição */
        }

        #metaCard {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            color: #333;
            background-color: #fff;
            /* Fundo branco para o card da meta */
        }

        .form-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            gap: 10px;
            /* Espaçamento entre os campos do formulário */
        }

        input[type="number"],
        input[type="text"] {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 100%;
            box-sizing: border-box;
            /* Inclui o padding e a borda no total da largura */
        }

        button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #45a049;
            /* Efeito hover no botão */
        }

        #progresso {
            width: 100%;
            text-align: center;
            font-size: 18px;
            /* Tamanho da fonte do progresso */
        }
    </style>
</head>

<body>

    <header>
        <h1>Poupança de Viagem</h1>
    </header>

    <nav>
        <a href="index.html">Tabela de Gastos</a>
        <a href="orcamento.html">Orçamento</a>
        <a href="cadastro.html">Cadastrar Despesa/Entrada</a>
        <a href="grafico.html">Gráfico de Saldo</a>
        <a href="categorias.html">Categorias e Subcategorias</a>
        <a href="linha_do_tempo.html">Linha do tempo</a>
        <a href="poupanca.html">Poupança</a>
        <a href="viagem.html">Viagem</a>
        <a href="serasa.html">Serasa</a>
    </nav>

    <main>
        <div id="metaCard">
            <h3>Meta de Poupança</h3>
            <p id="metaValor">R$ 0.00</p>
        </div>

        <div class="form-container">
            <input type="text" id="metaInput" placeholder="Digite a meta de poupança (R$)">
            <input type="number" id="valorInput" placeholder="Digite o valor a adicionar (R$)" min="1">
            <button id="adicionarButton">Adicionar ao Cofrinho</button>
        </div>

        <div class="cofre">
            <div class="nivel" id="nivel"></div>
        </div>

        <div id="progresso">
            Progresso: <span id="percentual">0%</span>
        </div>
    </main>

    <script>
        let totalAcumulado = 0; // Total acumulado fora da função
        let metaPoupanca = 0; // Meta de poupança

        // Função para atualizar a meta de poupança
        document.getElementById('metaInput').addEventListener('change', function () {
            metaPoupanca = parseFloat(this.value);
            document.getElementById('metaValor').innerText = 'R$ ' + metaPoupanca.toFixed(2);
            atualizarProgresso(); // Atualiza o progresso quando a meta for definida
        });

        // Função para adicionar valor ao cofre
        document.getElementById('adicionarButton').addEventListener('click', function () {
            const valorAdicionado = parseFloat(document.getElementById('valorInput').value);
            if (!isNaN(valorAdicionado) && valorAdicionado > 0) {
                totalAcumulado += valorAdicionado; // Atualiza o total acumulado
                const alturaAtual = (totalAcumulado / metaPoupanca) * 200; // Altura do cofre proporcional à meta
                document.getElementById('nivel').style.height = `${alturaAtual}px`; // Ajusta a altura do cofre
                document.getElementById('valorInput').value = ''; // Limpa o campo de entrada
                atualizarProgresso(); // Atualiza o progresso
            } else {
                alert("Por favor, insira um valor válido."); // Alerta se o valor for inválido
            }
        });

        // Função para atualizar o progresso
        function atualizarProgresso() {
            const percentual = Math.min((totalAcumulado / metaPoupanca) * 100, 100); // Limita o percentual a 100
            document.getElementById('percentual').innerText = percentual.toFixed(2) + '%'; // Atualiza o progresso
        }
    </script>

</body>

</html>
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poupança Mensal - Cofrinho</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }

        header {
            background-color: #4CAF50;
            color: white;
            text-align: center;
            padding: 1em 0;
            margin-bottom: 20px;
        }

        nav {
            background-color: #333;
            overflow: hidden;
        }

        nav a {
            float: left;
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }

        nav a:hover {
            background-color: #ddd;
            color: black;
        }

        main {
            display: flex;
            justify-content: center; /* Centraliza os elementos */
            align-items: flex-start; /* Alinha os itens ao topo */
            max-width: 1200px; /* Tamanho do container */
            margin: auto;
            gap: 20px; /* Espaçamento entre os cards e o cofre */
            padding: 20px;
        }
        
        .cards-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px; /* Espaçamento entre os cards */
        }

        .card {
            width: calc(15% - 20px); /* Ajuste para seis cards por linha */
            padding: 4px; /* Diminuindo o padding */
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            color: #333;
            font-size: 0.7em; /* Diminuindo o tamanho da fonte */
            cursor: pointer; /* Indica que o card é clicável */
        }

        .card h3 {
            font-size: 0.9em; /* Título um pouco maior */
            margin-bottom: 5px;
        }

        .card p {
            font-size: 0.9em; /* Tamanho do valor */
            font-weight: bold;
        }

        /* Cores da escala do arco-íris */
        .cor1 { background-color: #FF0000; } /* Vermelho */
        .cor2 { background-color: #FF7F00; } /* Laranja */
        .cor3 { background-color: #FFFF00; } /* Amarelo */
        .cor4 { background-color: #7FFF00; } /* Verde limão */
        .cor5 { background-color: #00FF00; } /* Verde */
        .cor6 { background-color: #00FF7F; } /* Verde água */
        .cor7 { background-color: #00FFFF; } /* Ciano */
        .cor8 { background-color: #007FFF; } /* Azul */
        .cor9 { background-color: #0000FF; } /* Azul royal */
        .cor10 { background-color: #7F00FF; } /* Violeta */
        .cor11 { background-color: #BF00FF; } /* Magenta */
        .cor12 { background-color: #FF00FF; } /* Fúcsia */

        /* Nova classe para o card clicado */
        .clicado {
            opacity: 0.5; /* Torna o card mais transparente */
            border: 2px solid #333; /* Adiciona uma borda ao card clicado */
        }

        /* Estilos do cofre/balde */
        .cofre {
            width: 350px; /* Aumenta a largura do cofre */
            height: 400px; /* Altura do cofre */
            border: 5px solid #333;
            border-radius: 10px;
            background-color: #fff;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .nivel {
            position: absolute;
            bottom: 0;
            width: 100%;
            background-color: #4CAF50;
            height: 0;
            transition: height 0.5s ease-in-out; /* Duração da transição */
        }

        /* Estilo do card de percentual acima do cofre */
        .percentual-container {
            display: flex;
            flex-direction: column;
            align-items: center; /* Centraliza o card de percentual */
            margin-bottom: 10px; /* Espaçamento abaixo do card percentual */
        }

        #percentualCard {
            width: 150px; /* Largura do card percentual */
            padding: 5px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            color: #333;
            background-color: #fff; /* Fundo branco para o card percentual */
            margin-bottom: 10px; /* Espaçamento abaixo do card percentual */
        }

        #valorAcumuladoCard {
            width: 150px; /* Largura do card de valor acumulado */
            padding: 5px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            color: #333;
            background-color: #fff; /* Fundo branco para o card de valor acumulado */
        }
    </style>
</head>
<body>

<header>
    <h1>Poupança Mensal - Cofrinho</h1>
</header>

<nav>
    <a href="index.html">Tabela de Gastos</a>
    <a href="orcamento.html">Orçamento</a>
    <a href="cadastro.html">Cadastrar Despesa/Entrada</a>
    <a href="grafico.html">Gráfico de Saldo</a>
    <a href="categorias.html">Categorias e Subcategorias</a>
    <a href="linha_do_tempo.html">Linha do tempo</a>
    <a href="poupanca.html">Poupança</a>
    <a href="viagem.html">Viagem</a>
    <a href="serasa.html">Serasa</a>
</nav>

<main>
    <div class="cards-container" id="cards-container">
        <!-- Os cards serão gerados dinamicamente via JavaScript -->
    </div>

    <div class="percentual-container">
        <!-- Card para mostrar o percentual do cofre cheio -->
        <div id="percentualCard">
            <h3>Percentual do Cofre</h3>
            <p id="percentual">0%</p>
        </div>
        <!-- Card para mostrar o valor acumulado -->
        <div id="valorAcumuladoCard">
            <h3>Valor Acumulado</h3>
            <p id="valorAcumulado">R$ 0.00</p>
        </div>
    </div>

    <!-- Cofrinho que será preenchido -->
    <div class="cofre">
        <div class="nivel" id="nivel"></div>
    </div>
</main>

<script>
    const totalMeses = 36; // Total de meses
    const cores = [
        'cor1', 'cor2', 'cor3', 
        'cor4', 'cor5', 'cor6', 
        'cor7', 'cor8', 'cor9', 
        'cor10', 'cor11', 'cor12'
    ];
    let totalAcumulado = 0; // Total acumulado fora da função

    // O total acumulado após 36 meses é 1224000
    const totalValorFinal = 1224000; 
    const alturaMaxima = 400; // Altura máxima do cofre

    function gerarCards() {
        const container = document.getElementById('cards-container');
        const nivel = document.getElementById('nivel');
        let valor = 100; // Valor inicial

        for (let mes = 1; mes <= totalMeses; mes++) {
            // Define a cor com base no ciclo de três meses
            const corClasse = cores[Math.floor((mes - 1) / 3) % 12];

            // Cria o card
            const card = document.createElement('div');
            card.classList.add('card', corClasse);
            card.innerHTML = `<h3>Mês ${mes}</h3><p>R$ ${valor.toFixed(2)}</p>`;

            // Adiciona evento de clique ao card
            card.addEventListener('click', () => {
                if (!card.classList.contains('clicado')) {
                    card.classList.add('clicado'); // Adiciona a classe clicado ao card
                    const valorClicado = calcularValor(mes); // Calcula o valor com base no mês
                    totalAcumulado += valorClicado; // Atualiza o total acumulado
                    const alturaAtual = (totalAcumulado / totalValorFinal) * alturaMaxima; 
                    nivel.style.height = `${alturaAtual}px`; // Ajusta a altura do cofre

                    // Atualiza os cards de percentual e valor acumulado
                    atualizarCardPercentual();
                    atualizarValorAcumulado();
                }
            });

            // Adiciona o card ao container
            container.appendChild(card);

            // Dobra o valor a cada 3 meses
            if (mes % 3 === 0) {
                valor *= 2;
            }
        }
    }

    // Função para calcular o valor com base no mês
    function calcularValor(mes) {
        let valor = 100; // Valor inicial
        for (let i = 1; i < mes; i++) {
            if (i % 3 === 0) {
                valor *= 2; // Dobra o valor a cada 3 meses
            }
        }
        return valor; // Retorna o valor correto para o mês
    }

    function atualizarCardPercentual() {
        const percentual = Math.min((totalAcumulado / totalValorFinal) * 100, 100); // Limita o percentual a 100
        document.getElementById('percentual').innerText = percentual.toFixed(2) + '%'; // Atualiza o card percentual
    }

    function atualizarValorAcumulado() {
        document.getElementById('valorAcumulado').innerText = 'R$ ' + totalAcumulado.toFixed(2); // Atualiza o valor acumulado
    }

    // Gera os cards ao carregar a página
    window.onload = gerarCards;
</script>

</body>
</html>
